# PRODUCTION SERVER DEPLOYMENT COMMANDS
# Run these commands directly on your production server (root@mail:~#)

# 1. Navigate to the application directory
cd /var/www/glomart-crm

# 2. Create backups of current files
cp properties/views.py properties/views.py.backup.$(date +%Y%m%d_%H%M%S)
cp properties/templates/properties/property_edit.html properties/templates/properties/property_edit.html.backup.$(date +%Y%m%d_%H%M%S)
cp leads/views.py leads/views.py.backup.$(date +%Y%m%d_%H%M%S)
cp leads/templates/leads/edit_lead.html leads/templates/leads/edit_lead.html.backup.$(date +%Y%m%d_%H%M%S)

# 3. Update properties/views.py - ADD IMPORT LINES
# Edit the file and add these import lines around line 19:
# nano properties/views.py
# Find the line: from authentication.models import DataFilter, Module
# Add after it:
# from .forms import PropertyCreateForm
# from projects.models import Project
# from authentication.models import Currency

# 4. Update the property_edit function in properties/views.py
# Find the property_edit function (around line 275) and replace it with the enhanced version
# The function should include navigation logic for prev/next property IDs

# 5. Update properties/templates/properties/property_edit.html
# Add navigation arrows CSS and JavaScript
# Add navigation counter and arrow buttons

# 6. Update leads/views.py - enhance lead_edit_view function
# Add navigation logic similar to properties

# 7. Update leads/templates/leads/edit_lead.html
# Add navigation arrows CSS and JavaScript similar to properties

# 8. Check file permissions
chown -R www-data:www-data /var/www/glomart-crm/
chmod -R 755 /var/www/glomart-crm/

# 9. Restart the service
systemctl restart glomart-crm

# 10. Check service status
systemctl status glomart-crm --no-pager

# 11. Test the feature
# Visit: https://sys.glomartrealestates.com/properties/[property-id]/edit/
# You should see left/right navigation arrows and a counter

echo "Deployment completed!"
echo "Navigation features should now be active."
echo "Test by visiting any property or lead edit page."